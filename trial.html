<!DOCTYPE html>
<!--
Latitude	Longitude
37.78564	-122.39712
282 2nd Street 4th floor, San Francisco, CA 94105
-->

<html>
<head>
  <meta charset="utf-8">
  <title>Map trial</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
       #instruction-panel {
        height: 100%;
        float: right;
        width: 35%;
        overflow: auto;
		padding-left:3px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
  <script>
  var  map;
  var dirService = new google.maps.DirectionsService();
  var dirDisplay;
function initialize() {
	dirDisplay = new google.maps.DirectionsRenderer();
  var mapOptions = {
    zoom:6,
   center: new google.maps.LatLng(37.78564, -122.39712)
  };
  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  dirDisplay.setMap(map);
  dirDisplay.setPanel(document.getElementById('instruction-panel'));
  gen_route();
}

function gen_route(){
	var start_point = "282 2nd street, san fancisco, ca 94105";
	var end_point = "282 2nd street, san fancisco, ca 94105";
	if(navigator.geolocation){
		
		navigator.geolocation.getCurrentPosition(function(position){
		console.log("inside navigator ");
		end_point = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
		
		//map.setCenter(pos);
		},
		function(){
		//absenceOfGeo(true);
		});
	}
	else{
		//Browser doesn't support geolocation
		alert("Browser does not support geolocation");
		//handleNoGeolocation(false);
	}
	
	var request = {
	origin : end_point,
	destination : start_point,
	travelMode: google.maps.TravelMode.DRIVING
	};
	dirService.route(request, function(response, status){
		if(status == google.maps.DirectionsStatus.OK)
			dirDisplay.setDirections(response);
	});

}

google.maps.event.addDomListener(window, 'load', initialize);
 </script>

</head>
<body>
  <div id="instruction-panel"></div>
  <div id="map-canvas"> </div>
</body>
</html>